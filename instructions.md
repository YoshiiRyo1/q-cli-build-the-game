# サッカーPKゲーム 仕様書

## 概要
PyGameを使用したサッカーのPK（ペナルティーキック）シミュレーションゲーム。プレイヤーとAIが交互にキッカーとゴールキーパーを担当し、5回のPKで勝敗を決める。レトロゲーム「ISS Deluxe」風のビジュアルスタイルを採用。

## ターゲット
- 全年齢向け
- シングルプレイヤー（AIとの対戦）

## ゲームモード
- プレイヤーとAIが交互にキッカーとゴールキーパーを担当
- 各ラウンドでプレイヤーが先にキッカーを担当し、次にゴールキーパーを担当

## ゲームの進行
1. 合計5ラウンドのPKを行う
2. 各ラウンドは以下の2つのフェーズで構成:
   - プレイヤーがキッカー、AIがゴールキーパー
   - AIがキッカー、プレイヤーがゴールキーパー
3. 5ラウンド終了時に得点が高い方が勝利
4. 同点の場合は引き分け（サドンデスなし）

## 視点とグラフィックス
- ISS Deluxe風のレトロなピクセルアート風グラフィック
- 疑似3D視点（キッカーを後ろから見ている視点）
- 簡易なアニメーション
  - ボールの動きと軌跡
  - キッカーのシュートモーション
  - ゴールキーパーのダイビングモーション
- 視覚的な一貫性
  - プレイヤーが操作するキャラクターは常に青色
  - AIが操作するキャラクターは常に赤色
  - キッカーとキーパーの役割が入れ替わっても色は変わらない
- レトロゲーム風の演出（点滅エフェクト、メッセージ表示など）

## 操作方法
- キーボード操作のみ
  - キッカー時: 方向キーでシュート方向を選択、スペースキーでシュート
  - ゴールキーパー時: 方向キーでダイビング方向を選択、スペースキーで確定

## ゲームの要素
- ゴールは9つのエリアに分割（左上、中央上、右上、左中、中央、右中、左下、中央下、右下）
- キッカーはこの9エリアのいずれかを狙ってシュート
- ゴールキーパーは9エリアのいずれかにダイビング
- パワーメーターとリアクションタイムメーター（ISS風の演出）
- 三角飛び（特殊能力）：10%の確率でゴールキーパーが必ずセーブする特殊能力が発動
  - 発動時には「SA N KA KU TO BI !!!」の特殊メッセージが表示される

## AI動作
- AIはランダムにシュート方向とセーブ方向を決定
- 予測可能なパターンは避け、適度なランダム性を持たせる
- AIも10%の確率で三角飛び特殊能力を使用可能

## UI要素
- ISS Deluxe風のスコアボード表示（プレイヤー vs AI）
- 結果表示（O/X マーク）
- 点滅するメッセージ表示（ゴール/セーブ時）
- レトロゲーム風のメニュー画面
- ゲーム終了時の結果表示（勝利時はトロフィーと星のエフェクト）

## ゲームステート
- MENU: メニュー画面
- PLAYER_KICKING: プレイヤーがキッカー
- AI_GOALKEEPING: AIがゴールキーパー
- AI_KICKING: AIがキッカー
- PLAYER_GOALKEEPING: プレイヤーがゴールキーパー
- RESULT: 結果表示

## 視覚効果
- ISS風の芝生パターン（横縞模様）
- ゴールのネット表現（斜めパターン）
- ボールの軌跡表現
- ダイビングの軌跡表現
- 点滅するUI要素
- 勝利時の特殊演出

## 実装しない機能
- 難易度レベル
- サウンド効果
- スコア保存
- プレイヤー名入力
- カスタマイズ機能

## 技術要件
- Python
- PyGame
- 必要最小限のグラフィックアセット（すべてコードで描画）
